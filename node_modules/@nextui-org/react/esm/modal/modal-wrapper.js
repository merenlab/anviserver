import e,{useEffect as r,useRef as t,useMemo as o,useState as n}from"react";import l from"../utils/with-defaults";import i from"../utils/css-transition";import{isChildElement as s}from"../utils/collections";import{KeyCode as c}from"../use-keyboard";import a from"../utils/clsx";import u from"./modal-close-button";import{StyledModal as m,StyledModalHideTab as d}from"./modal.styles";import{jsx as f}from"react/jsx-runtime";import{jsxs as b}from"react/jsx-runtime";import{Fragment as p}from"react/jsx-runtime";const x="nextui-modal",h=({className:e,children:l,visible:h,fullScreen:$,closeButton:T,rebound:v,animated:j,onCloseButtonClick:w,scroll:y,...N})=>{const k=t(null),C=t(null),g=t(null),[B,I]=n(!1);r((()=>{const e=setTimeout((()=>{I(!0),clearTimeout(e)}),300);return()=>clearTimeout(e)}),[]),r((()=>{if(!h)return;const e=document.activeElement;s(k.current,e)||C.current&&C.current.focus()}),[h]);const S=e=>{const r=e.keyCode===c.Tab;if(!h||!r)return;const t=document.activeElement;e.shiftKey?t===C.current&&g.current&&g.current.focus():t===g.current&&C.current&&C.current.focus()},E=()=>{w&&w()},K=o((()=>h?"open":"closed"),[h]),D=o((()=>b(m,{ref:k,"aria-modal":h,className:a(x,`${x}--${K}`,{[`${x}-fullscreen`]:$,[`${x}-with-close-button`]:T,[`${x}-rebound`]:v,[`${x}-rendered`]:B},e),closeButton:T,"data-state":K,fullScreen:$,role:"dialog",scroll:y,tabIndex:-1,...N,onKeyDown:S,children:[f(d,{ref:C,"aria-hidden":"true",className:`${x}-hide-tab`,role:"button",tabIndex:0}),T&&f(u,{onClick:E}),l,f(d,{ref:g,"aria-hidden":"true",className:`${x}-hide-tab`,role:"button",tabIndex:0})]})),[v,l]);return f(p,{children:j?f(i,{clearTime:300,enterTime:20,leaveTime:20,name:`${x}-wrapper`,visible:h,children:D}):h?D:null})};h.toString=()=>".nextui-modal-wrapper";export default l(h,{className:"",visible:!1,rebound:!1});