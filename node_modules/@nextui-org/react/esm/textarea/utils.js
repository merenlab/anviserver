import{pick as t}from"../utils/collections";const e=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],o={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},i="undefined"!=typeof document&&!!document.documentElement.currentStyle;export const forceHiddenStyles=t=>{Object.keys(o).forEach((e=>{t.style.setProperty(e,o[e],"important")}))};export const getSizingData=o=>{const r=window.getComputedStyle(o);if(null===r)return null;const d=t(e,r),{boxSizing:n}=d;if(""===n)return null;i&&"border-box"===n&&(d.width=parseFloat(d.width)+parseFloat(d.borderRightWidth)+parseFloat(d.borderLeftWidth)+parseFloat(d.paddingRight)+parseFloat(d.paddingLeft)+"px");return{sizingStyle:d,paddingSize:parseFloat(d.paddingBottom)+parseFloat(d.paddingTop),borderSize:parseFloat(d.borderBottomWidth)+parseFloat(d.borderTopWidth)}};let r=null;export const calculateNodeHeight=(t,e,o=1,i=1/0)=>{r||(r=document.createElement("textarea"),r.setAttribute("tabindex","-1"),r.setAttribute("aria-hidden","true"),forceHiddenStyles(r)),null===r.parentNode&&document.body.appendChild(r);const{paddingSize:d,borderSize:n,sizingStyle:a}=t,{boxSizing:l}=a;Object.keys(a).forEach((t=>{const e=t;r.style[e]=a[e]})),forceHiddenStyles(r),r.value=e;let s=((t,e)=>{const o=t.scrollHeight;return"border-box"===e.sizingStyle.boxSizing?o+e.borderSize:o-e.paddingSize})(r,t);r.value="x";const p=r.scrollHeight-d;let g=p*o;"border-box"===l&&(g=g+d+n),s=Math.max(g,s);let h=p*i;return"border-box"===l&&(h=h+d+n),s=Math.min(h,s),[s,p]};