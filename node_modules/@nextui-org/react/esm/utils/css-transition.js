import e,{useEffect as t,useLayoutEffect as l,useState as r}from"react";import n from"./clsx";const c=({children:c,onExited:i,onEntered:s,className:a,childrenRef:m,enterTime:o=60,leaveTime:u=60,clearTime:T=60,visible:d=!1,name:p="transition",...f})=>{const[$,v]=r(""),[N,E]=r(d);return l((()=>{const e=d?"enter":"leave";d&&!N&&E(!0),v(`${p}-${e}`);const t=d?o:u,l=setTimeout((()=>{v(`${p}-${e} ${p}-${e}-active`),"leave"===e?null==i||i():null==s||s(),clearTimeout(l)}),t),r=setTimeout((()=>{d||(v(""),E(!1)),clearTimeout(r)}),t+T);return()=>{clearTimeout(l),clearTimeout(r)}}),[d,N]),t((()=>{if(null==m||!m.current)return;const e=$.split(" "),t=m.current.className.split(" ").filter((e=>!e.includes(p)));m.current.className=n(t,e)}),[m,$]),e.isValidElement(c)&&N?e.cloneElement(c,{...f,className:n(c.props.className,a,!(null!=m&&m.current)&&$)}):null};export default e.memo(c);