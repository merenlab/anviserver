import{useRef as e,useCallback as r}from"react";import{mergeProps as n}from"@react-aria/utils";import{useMenuTrigger as o}from"@react-aria/menu";import{useMenuTriggerState as t}from"@react-stately/menu";import{mergeRefs as s}from"../utils/refs";export function useDropdown(i={}){const{triggerRef:a,type:l="menu",trigger:u="press",isDisabled:p=!1,borderWeight:m,closeOnSelect:c,disableAnimation:g=!1,disableTriggerPressedAnimation:f=!1,isOpen:d,defaultOpen:b,onOpenChange:O,...P}=i,h=e(null),y=a||h,C=e(null),T=e(null),A=t({...i,isOpen:d,defaultOpen:b,onOpenChange:O}),{menuTriggerProps:R,menuProps:D}=o({type:l,trigger:u,isDisabled:p},A,y),S=r((()=>{A.close(),null==P.onClose||P.onClose()}),[A.close,P.onClose]),v=r(((e={},r=null)=>{const{css:o,...t}=null!=a&&a.current?n(R,e):n(e,R);return{ref:s(h,r),css:f?o:{'&[aria-haspopup="true"]&[aria-expanded="true"]':{opacity:.7,backfaceVisibility:"hidden",transform:"translateZ(0) scale(0.97)"},...o},...t}}),[h,a,R,f]);return{...D,popoverProps:P,state:A,ref:C,onClose:S,autoFocus:A.focusStrategy||!0,disableAnimation:g,disableTriggerPressedAnimation:f,menuRef:C,borderWeight:m,menuPopoverRef:T,menuTriggerRef:y,closeOnSelect:c,getMenuTriggerProps:v}}