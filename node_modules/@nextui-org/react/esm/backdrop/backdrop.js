import e,{useCallback as t,useMemo as r}from"react";import a from"../utils/with-defaults";import i from"../utils/css-transition";import o from"../use-current-state";import s from"../utils/clsx";import n,{KeyCode as l}from"../use-keyboard";import{__DEV__ as m}from"../utils/assertion";import{StyledBackdrop as c,StyledBackdropLayer as p,StyledBackdropContent as u}from"./backdrop.styles";import{jsx as d}from"react/jsx-runtime";import{jsxs as f}from"react/jsx-runtime";import{Fragment as b}from"react/jsx-runtime";const x="nextui-backdrop",k=e.memo((({children:e,onClick:a,onKeyPress:m,visible:k,maxWidth:y,blur:h,animated:$,opacity:v,preventDefault:N,className:j,css:T,...g})=>{const[,C,D]=o(!1),w=e=>{D.current||a&&a(e)},E=t((e=>{e.stopPropagation()}),[]),I=()=>{if(!D.current)return;const e=setTimeout((()=>{C(!1),clearTimeout(e)}),0)},{bindings:M}=n((e=>{m&&m(e)}),[l.Escape,l.Space],{disableGlobalEvent:!0,preventDefault:N}),P=r((()=>k?"open":"closed"),[k]),S=r((()=>f(c,{"aria-hidden":!0,className:s(x,`${x}--${P}`,j),css:{$$backdropOpacity:v,...T},"data-state":P,role:"button",tabIndex:-1,onClick:w,onMouseUp:I,...M,...g,children:[d(p,{animated:$,blur:h,className:s(`${x}-layer`,h?`${x}-layer-blur`:`${x}-layer-default`)}),d(u,{animated:$,className:`${x}-content`,css:{maxWidth:y},onClick:E,onMouseDown:()=>C(!0),children:e})]})),[e]);return d(b,{children:$?d(i,{clearTime:150,enterTime:20,leaveTime:20,name:`${x}-wrapper`,visible:k,children:S}):k?S:null})}));m&&(k.displayName="NextUI.Backdrop"),k.toString=()=>".nextui-backdrop";export default a(k,{onClick:()=>{},visible:!1,blur:!1,animated:!0,preventDefault:!0,opacity:.5,className:""});