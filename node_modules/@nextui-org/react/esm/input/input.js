import e,{useEffect as t,useImperativeHandle as a,useMemo as r,useRef as l,useState as n}from"react";import{useLabel as i}from"@react-aria/label";import{useFocusRing as o}from"@react-aria/focus";import s from"../use-theme";import{warn as d}from"../utils/console";import c from"../utils/clear-icon";import u from"../utils/clsx";import{__DEV__ as p}from"../utils/assertion";import{StyledInput as m,StyledInputMainContainer as h,StyledInputContainer as f,StyledHelperTextContainer as b,StyledHelperText as $,StyledInputWrapper as g,StyledInputPlaceholder as y,StyledInputClearButtonIconWrapper as C,StyledInputClearButton as x,StyledInputBlockLabel as w,StyledInputLabel as N,StyledInputContent as v}from"./input.styles";import{defaultProps as k}from"./input-props";import{jsx as S}from"react/jsx-runtime";import{jsxs as I}from"react/jsx-runtime";const R="nextui-input",P=e.forwardRef((({as:e="input",label:k,labelPlaceholder:P,labelLeft:F,labelRight:L,size:B,helperText:D,color:T,helperColor:V,status:j,contentLeft:O,contentRight:W,contentClickable:q,contentLeftStyling:U,contentRightStyling:z,onContentClick:E,initialValue:A,onChange:G,readOnly:H,value:J,onClearClick:K,clearable:M,shadow:Q,animated:X,required:Y,width:Z,className:_,onBlur:ee,onFocus:te,autoComplete:ae,placeholder:re,fullWidth:le,borderWeight:ne,disabled:ie,bordered:oe,underlined:se,rounded:de,css:ce,...ue},pe)=>{const me=l(null);a(pe,(()=>me.current));const[he,fe]=n(A),[be,$e]=n(!1),{isDark:ge}=s(),ye=r((()=>void 0!==J),[J]),Ce=r((()=>k||P),[k,P]),xe=r((()=>P?"":re),[re,P]),we=r((()=>le?"100%":Z||"initial"),[le,Z]);se&&p&&(oe&&d("Using underlined and bordered at the same time will have no effect."),de&&d("Using underlined and rounded at the same time will have no effect."));const Ne=(e,t)=>{ie||E&&E(e,t)};t((()=>{ye&&fe(J)}),[ye,J]);const ve=r((()=>"textarea"===e),[e]),ke={...ue,...ye?{value:he}:{defaultValue:A}},{isFocusVisible:Se,focusProps:Ie}=o(),{labelProps:Re,fieldProps:Pe}=i({...ke,label:Ce}),Fe=r((()=>be?"hover":ie?"disabled":H?"read-only":he?"with-value":"normal"),[be,ie,H,he]);return I(h,{borderWeight:ne,className:u(`${R}-main-container`,`${R}-main-container--${Fe}`),color:T,css:{width:we,...ce},"data-state":Fe,disabled:ie,helperColor:V,rounded:de,size:B,status:j,children:[Ce&&S(w,{animated:X,asPlaceholder:!!P,bordered:oe,className:`${R}-block-label`,focused:be,hasContentLeft:!!O,htmlFor:"htmlFor"in Re?Re.htmlFor:"",id:Re.id,isTextarea:ve,rounded:de,underlined:se,withValue:!!he,children:Ce}),S(f,{animated:X,className:u(`${R}-container`,`${R}-container--${Fe}`,{[`${R}-container--input`]:!ve,[`${R}-container--textarea`]:ve,[`${R}-container--read-only`]:H},_),focused:be,isReadOnly:H,isTextarea:ve,underlined:se,children:I(g,{animated:X,as:Ce?"div":"label",bordered:oe,className:u(`${R}-wrapper`,`${R}-wrapper--${Fe}`,{[`${R}-wrapper--bordered`]:oe,[`${R}-wrapper--underlined`]:se,[`${R}-wrapper--shadow`]:Q}),disabled:ie,focused:be,isReadOnly:H,isTextarea:ve,shadow:Q,underlined:se,children:[!Ce&&re&&S(y,{className:`${R}-placeholder`,children:re}),F&&S(N,{bordered:oe,className:`${R}-label--left`,isDark:ge,isDefaultStatus:"default"===j,underlined:se,children:F}),O&&S(v,{applyStyles:U,className:u(`${R}-content`,`${R}-content--left`),clickable:q,onClick:e=>Ne("left",e),children:O}),S(m,{ref:me,"aria-multiline":ve,"aria-placeholder":xe,"aria-readonly":H,"aria-required":Y,as:e,autoComplete:ae,bordered:oe,className:u({[`${R}`]:!ve,[`${R}-textarea`]:ve,[`${R}-disabled`]:ie,[`${R}-rounded`]:de,[`${R}-${R}-right-content`]:W,[`${R}-left-content`]:O}),"data-state":Fe,disabled:ie,focused:be,hasLeftContent:!!O,hasRightContent:!!W,isTextarea:ve,placeholder:xe,readOnly:H,required:Y,type:"text",onBlur:e=>{$e(!1),ee&&ee(e)},onChange:e=>{ie||H||(ye||fe(e.target.value),G&&G(e))},onFocus:e=>{$e(!0),te&&te(e)},...ke,...Pe}),M&&S(x,{animated:X,"aria-label":"clear",className:`${R}-clear-button`,disabled:ie||H,hasContentRight:!!W,lang:"en",type:"button",underlined:se,visible:Boolean(he),onClick:e=>{if(e.preventDefault(),e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),ye||fe(""),K&&K(e),!me.current)return;const t=((e,t)=>({...t,target:e,currentTarget:e}))(me.current,e);t.target.value="",G&&G(t),me.current.focus()},...Ie,children:S(C,{isFocusVisible:Se,children:S(c,{fill:"currentColor"})})}),W&&S(v,{applyStyles:z,className:u(`${R}-content`,`${R}-content--right`),clickable:q,onClick:e=>Ne("right",e),children:W}),L&&S(N,{bordered:oe,className:`${R}-label--right`,isDark:ge,isDefaultStatus:"default"===j,isRight:!0,underlined:se,children:L})]})}),S(b,{className:`${R}-helper-text-container`,withValue:!!D,children:D&&S($,{className:`${R}-helper-text`,children:D})})]})}));P.displayName="NextUI.Input",P.defaultProps=k,P.toString=()=>".nextui-input";export default P;