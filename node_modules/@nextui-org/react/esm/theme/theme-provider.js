import e,{useState as t,useMemo as r,useEffect as o}from"react";import{SSRProvider as m}from"@react-aria/ssr";import{OverlayProvider as s}from"@react-aria/overlays";import i from"../css-baseline";import l from"../utils/with-defaults";import a from"../utils/deep-merge";import{copyObject as n}from"../utils/object";import u from"../use-ssr";import{changeTheme as d,getThemeName as c,getDocumentCSSTokens as p,getDocumentTheme as v}from"./utils";import f,{defaultContext as b}from"./theme-context";import{jsx as h}from"react/jsx-runtime";import{jsxs as y}from"react/jsx-runtime";export default l((({theme:e,disableBaseline:l,children:x})=>{const{isBrowser:j}=u(),[B,N]=t(b.type),g=e=>{N((t=>t!==e?e:t))},w=e=>{const t=v(e);t&&g(t)},E=r((()=>{const e=j?p():{},t=a(n(b.theme),e),r=c(B);return{theme:t,type:r,isDark:"dark"===r}}),[B,j]);return o((()=>{var e,t,r;w(null==(e=document)?void 0:e.documentElement);const o=new MutationObserver((e=>{var t;if(e&&e.length>0&&"BODY"===(null==(t=e[0])?void 0:t.target.nodeName)){var r,o,m;const e=null==(r=document)||null==(o=r.body)||null==(m=o.dataset)?void 0:m.theme;e&&g(e)}else{var s;w(null==(s=document)?void 0:s.documentElement)}}));return o.observe(null==(t=document)?void 0:t.documentElement,{attributes:!0,attributeFilter:["data-theme","style"]}),o.observe(null==(r=document)?void 0:r.body,{attributes:!0,attributeFilter:["data-theme","style"]}),()=>o.disconnect()}),[]),o((()=>{j&&e&&null!=e&&e.className&&(d(e.className),g(c(e.className)))}),[j,e]),h(m,{children:h(s,{children:y(f.Provider,{value:E,children:[!l&&h(i,{}),x]})})})}),{disableBaseline:!1});