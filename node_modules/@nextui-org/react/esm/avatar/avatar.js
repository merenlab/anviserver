import{useFocusRing as a}from"@react-aria/focus";import t,{useMemo as r,useState as e,useEffect as s}from"react";import{mergeProps as o}from"@react-aria/utils";import{useDOMRef as i}from"../utils/dom";import{__DEV__ as n}from"../utils/assertion";import l from"../utils/clsx";import c from"./avatar.styles";import{jsx as m}from"react/jsx-runtime";import{jsxs as u}from"react/jsx-runtime";const p=a=>(null==a?void 0:a.length)<=4?a:null==a?void 0:a.slice(0,3);export const Avatar=t.forwardRef(((t,n)=>{const{as:f,src:v,css:x,text:d,icon:N,alt:g,className:b,imgRef:y,...A}=t,h=i(n),j=!v,[F,R]=e(!1),V=i(y),{isFocusVisible:w,focusProps:I}=a();s((()=>{var a;(null==V||null==(a=V.current)?void 0:a.complete)&&R(!0)}),[]);const L=r((()=>!F&&v?"loading":"ready"),[v,F]),P=r((()=>{if("button"===f)return{appearance:"none",outline:"none",border:"none",cursor:"pointer"}}),[f]);return u(c,{ref:h,as:f,...o(A,I),className:l({"only-text-avatar":j},b),css:{...P,...x},"data-state":L,isFocusVisible:w,children:[m("span",{className:"nextui-avatar-bg"}),!j&&m("img",{ref:V,alt:g,className:l("nextui-avatar-img",`nextui-avatar--${L}`,{"nextui-avatar-ready":F}),"data-state":L,src:v,onLoad:()=>R(!0)}),j&&!N&&d&&m("span",{className:"nextui-avatar-text",children:p(d)}),N&&m("span",{className:"nextui-avatar-icon",children:N})]})}));n&&(Avatar.displayName="NextUI.Avatar"),Avatar.toString=()=>".nextui-avatar";export default Avatar;