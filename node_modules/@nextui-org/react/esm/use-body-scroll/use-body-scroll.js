import{useEffect as e,useRef as t,useState as r}from"react";const n={scrollLayer:!1},o=new Map,u=e=>!!(e.touches&&e.touches.length>1)||(e.preventDefault(),!1);export default(c,s)=>{if("undefined"==typeof document)return[!1,e=>e];const d=c||t(document.body),[i,a]=r(!1),l={...n,...s||{}},f=()=>!l.scrollLayer&&(!("undefined"==typeof window||!window.navigator)&&/iP(ad|hone|od)/.test(window.navigator.platform));return e((()=>{if(!d||!d.current)return;const e=d.current.style.overflow;if(i){if(o.has(d.current))return;return f()?document.addEventListener("touchmove",u,{passive:!1}):d.current.style.overflow="hidden",void o.set(d.current,{last:e})}if(o.has(d.current)){if(f())document.removeEventListener("touchmove",u);else{const e=o.get(d.current);d.current.style.overflow=e.last}o.delete(d.current)}}),[i,d]),[i,a]};