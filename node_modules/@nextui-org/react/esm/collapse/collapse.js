import e,{useEffect as t,useMemo as i}from"react";import{useFocusRing as r}from"@react-aria/focus";import{useId as a}from"@react-aria/utils";import{warn as o}from"../utils/console";import s from"../use-current-state";import l from"../utils/expand";import d,{KeyCode as n}from"../use-keyboard";import c from"../utils/clsx";import m from"../utils/with-defaults";import{useCollapseContext as p}from"./collapse-context";import{StyledCollapse as u,StyledCollapseView as f,StyledCollapseContent as b}from"./collapse.styles";import h from"./collapse-icon";import{jsx as v}from"react/jsx-runtime";import{jsxs as x}from"react/jsx-runtime";const w="nextui-collapse",N=({children:m,title:N,subtitle:$,expanded:g,shadow:j,className:E,divider:I,arrowIcon:V,showArrow:y,disabled:C,onChange:D,bordered:k,contentLeft:A,preventDefault:F,animated:S,borderWeight:W,index:q,...G})=>{const[L,P,z]=s(g),{values:B,divider:H,animated:J,updateValues:K}=p(),{isFocusVisible:M,focusProps:O}=r();N||o('"title" is required.',"Collapse"),t((()=>{L!==g&&P(g)}),[g]),t((()=>{if(!B.length)return;const e=!!B.find((e=>e===q));P(e)}),[B.join(",")]);const Q=a(),R=a(),T=i((()=>y?V||v(h,{}):null),[V,y]),U=void 0===H?I:H,X=i((()=>void 0===J?S:J),[J,S]),Y=e=>{if(C)return;const t=!z.current;P(t),K&&K(q,t),D&&D(e,q,t)},{bindings:Z}=d((e=>{Y(e)}),[n.Enter,n.Space],{disableGlobalEvent:!0,preventDefault:F}),_=i((()=>L?"open":"closed"),[L]);return x(u,{animated:X,borderWeight:W,bordered:k,className:c(E,w,`${w}--${_}`),"data-state":_,divider:U,shadow:j,tabIndex:-1,visible:L,...G,children:[v(f,{"aria-controls":R,"aria-disabled":C,"aria-expanded":L,className:`${w}-view`,"data-state":_,disabled:C,id:Q,isFocusVisible:M,role:"button",tabIndex:C?-1:0,onClick:Y,...O,...Z,children:x("div",{className:c(`${w}-title-container`),children:[A&&v("div",{className:`${w}-title-content-left`,children:A}),x("div",{className:`${w}-title-content`,children:[e.isValidElement(N)?N:v("h3",{className:`${w}-title`,children:N}),$&&v("div",{className:`${w}-subtitle`,children:$})]}),v("div",{className:`${w}-title-content-right`,children:T})]})}),v(l,{animated:X,isExpanded:L,children:v(b,{"aria-labelledby":Q,className:`${w}-content`,id:R,role:"region",tabIndex:-1,children:m})})]})};N.toString=()=>".nextui-collapse";export default m(N,{shadow:!1,divider:!0,bordered:!1,showArrow:!0,animated:!0,disabled:!1,preventDefault:!0,expanded:!1});