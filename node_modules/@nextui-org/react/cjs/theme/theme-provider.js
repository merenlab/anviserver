var e=require("@babel/runtime/helpers/interopRequireDefault");exports.__esModule=!0,exports.default=void 0;var t=m(require("react")),r=require("@react-aria/ssr"),u=require("@react-aria/overlays"),n=e(require("../css-baseline")),a=e(require("../utils/with-defaults")),l=e(require("../utils/deep-merge")),o=require("../utils/object"),i=e(require("../use-ssr")),s=require("./utils"),d=m(require("./theme-context")),c=require("react/jsx-runtime");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var u={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=n?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(u,a,l):u[a]=e[a]}return u.default=e,r&&r.set(e,u),u}var v=(0,a.default)((({theme:e,disableBaseline:a,children:f})=>{const{isBrowser:m}=(0,i.default)(),[v,p]=(0,t.useState)(d.defaultContext.type),b=e=>{p((t=>t!==e?e:t))},h=e=>{const t=(0,s.getDocumentTheme)(e);t&&b(t)},y=(0,t.useMemo)((()=>{const e=m?(0,s.getDocumentCSSTokens)():{},t=(0,l.default)((0,o.copyObject)(d.defaultContext.theme),e),r=(0,s.getThemeName)(v);return{theme:t,type:r,isDark:"dark"===r}}),[v,m]);return(0,t.useEffect)((()=>{var e,t,r;h(null==(e=document)?void 0:e.documentElement);const u=new MutationObserver((e=>{var t;if(e&&e.length>0&&"BODY"===(null==(t=e[0])?void 0:t.target.nodeName)){var r,u,n;const e=null==(r=document)||null==(u=r.body)||null==(n=u.dataset)?void 0:n.theme;e&&b(e)}else{var a;h(null==(a=document)?void 0:a.documentElement)}}));return u.observe(null==(t=document)?void 0:t.documentElement,{attributes:!0,attributeFilter:["data-theme","style"]}),u.observe(null==(r=document)?void 0:r.body,{attributes:!0,attributeFilter:["data-theme","style"]}),()=>u.disconnect()}),[]),(0,t.useEffect)((()=>{m&&e&&null!=e&&e.className&&((0,s.changeTheme)(e.className),b((0,s.getThemeName)(e.className)))}),[m,e]),(0,c.jsx)(r.SSRProvider,{children:(0,c.jsx)(u.OverlayProvider,{children:(0,c.jsxs)(d.default.Provider,{value:y,children:[!a&&(0,c.jsx)(n.default,{}),f]})})})}),{disableBaseline:!1});exports.default=v,module.exports=exports.default;